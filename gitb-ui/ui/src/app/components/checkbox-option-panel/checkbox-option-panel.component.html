<div class="rootDiv">
    @if (icon) {
        <button #button id="button-options" #pop="bs-tooltip" type="button" [pending]="pending" [icon]="true" [class.open]="open" class="btn btn-secondary text-nowrap" (click)="pop.hide(); buttonClicked(); $event.stopPropagation()" containerClass="shortTooltip" container="body" [tooltip]="label" [triggers]="'mouseover:mouseout'" [delay]="Constants.TOOLTIP_DELAY"><i [class]="icon"></i></button>
    } @else {
        <button #button id="button-options" type="button" [class.open]="open" [pending]="pending" class="btn btn-secondary text-nowrap dropdown-toggle" (click)="buttonClicked(); $event.stopPropagation()"><span class="me-2">{{label}}</span></button>
    }
    <ng-template #popupTemplate>
        <div class="optionForm" [class.singleSelection]="singleSelection">
            <div class="container-fluid">
                @for (optionSet of options; track index1; let index1 = $index) {
                    <div class="row">
                        @for (option of optionSet; track index2; let index2 = $index) {
                            <div class="col-12 itemContainer" (click)="handleClick(option.key); $event.stopPropagation()">
                                <div class="d-flex">
                                    @if (singleSelection) {
                                        <div class="optionLabel">@if (option.iconClass) { <div class="optionIcon"><i [ngClass]="option.iconClass!"></i></div> } <div>{{option.label}}</div></div>
                                    } @else {
                                        <input class="form-check-input" type="checkbox" [attr.id]="'option-'+index1+'-'+index2" [attr.name]="'option-'+index1+'-'+index2" [(ngModel)]="currentState[option.key]" (ngModelChange)="updated.emit(currentState)">
                                        <label class="form-check-label disable-select" [attr.for]="'option-'+index1+'-'+index2">
                                            <span class="optionLabel">@if (option.iconClass) { <i class="optionIcon" [ngClass]="option.iconClass!"></i> } {{option.label}}</span>
                                        </label>
                                    }
                                </div>
                            </div>
                        }
                        @if (!$last) {
                            <div class="separator"></div>
                        }
                    </div>
                }
            </div>
        </div>
    </ng-template>
</div>

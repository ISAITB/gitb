@if (!filtering || item.filtered) {
    @if (hideSelf) {
        @if (item.items) {
            <app-conformance-statement-items-display [items]="item.items" [wrapDescriptions]="wrapDescriptions" [expandable]="expandable" [filtering]="filtering" [shade]="!shade" [animated]="animated" [withCheck]="withCheck" [withExport]="withExport" [withResults]="withResults" (selectionChanged)="childSelectionChanged($event)" (export)="childExported($event)"></app-conformance-statement-items-display>
        }
    } @else {
        <div class="item-container" [class.shade]="shade">
            <div class="item-header" (click)="clickHeader();$event.stopPropagation()" [class.actionable]="expandable || withCheck" [class.wrapDescriptions]="wrapDescriptions">
                <div class="item-header-title">
                    @if (expandable && hasChildren && !allChildrenHidden) {
                        <div class="item-icon"><app-collapsing-icon [isCollapsed]="item.collapsed!" [asDiv]="true"></app-collapsing-icon></div>
                    }
                    @if (showCheck) {
                        <div class="item-check"><input type="checkbox" name="itemCheck" [(ngModel)]="item.checked" (ngModelChange)="updateChecked()"></div>
                    }
                    <div class="item-name">{{item.name}}</div>
                </div>
                @if (item.description) {
                    <div class="item-description">{{item.description}}</div>
                }
                @if (withExport && expandable && hasChildren && !allChildrenHidden) {
                    <div class="item-controls">
                        <button class="btn btn-secondary" (click)="onExport(); $event.stopPropagation();" [pending]="item.exportPending" [icon]="true"  containerClass="shortTooltip" tooltip="Export" [delay]="Constants.TOOLTIP_DELAY" [triggers]="'mouseover:mouseout'"><i class="fa-regular fa-file-pdf"></i></button>
                    </div>
                }
                @if (showResults) {
                    <div class="item-results">
                        @if (updateTime) {
                            <app-tag label="fa-solid fa-clock" [icon]="true" tooltipText="Last update time" [value]="updateTime"></app-tag>
                        }
                        @if (counters) {
                            <div class="item-counters">
                                <app-test-status-icons [counters]="counters" [asLine]="true"></app-test-status-icons>
                            </div>
                            <div class="item-ratios">
                                <app-test-result-ratio [counters]="counters" [asLine]="true"></app-test-result-ratio>
                            </div>
                        }
                        @if (status) {
                            <div class="item-status"><i containerClass="shortTooltip" [tooltip]="dataService.tooltipForTestResult(status)" [ngClass]="dataService.iconForTestResult(status)"></i></div>
                        }
                    </div>
                }
            </div>
            @if (item.items && item.items.length > 0) {
                <div class="item-content" [collapse]="item.collapsed!" [isAnimated]="expandable && animated" (expanded)="expanded()" (collapsed)="collapsed()">    
                    <app-conformance-statement-items-display [items]="item.items" [wrapDescriptions]="wrapDescriptions" [expandable]="expandable" [filtering]="filtering" [shade]="!shade" [animated]="animated" [withCheck]="withCheck" [withExport]="withExport" [withResults]="withResults" (selectionChanged)="childSelectionChanged($event)" (export)="childExported($event)"></app-conformance-statement-items-display>
                </div>
            }
        </div>
    }
}
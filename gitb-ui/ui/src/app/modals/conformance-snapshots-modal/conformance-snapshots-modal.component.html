<div class="modal-header">
    <h4>Conformance snapshots</h4>
</div>
<form>
    <div class="modal-body" [ngSwitch]="editMode">
        <div class="row mb-3" *ngSwitchCase="true">
            <label class="col-3 col-form-label text-end" for="label">Snapshot label:</label>
            <div class="col-8">
                <input id="label" name="label" [(ngModel)]="snapshotToEdit!.label" class="form-control" type="text">
            </div>
            <div app-tooltip class="col-auto" tbTooltip="A label to help in distinguishing and referring to the snapshot."></div>
        </div>
        <ng-container *ngSwitchDefault>
            <div class="alert alert-info rounded div-padded">
                <span>Select the snapshot to view in the conformance dashboard.</span>
            </div>
            <div class="searchControls">
                <app-text-filter name="organisationFilter" [width]="300" [placeholder]="'Search snapshots...'" [(ngModel)]="snapshotFilter" (apply)="applySnapshotFilter()"></app-text-filter>
            </div>
            <div class="card no-bottom-margin">
                <div table-directive
                    [columns]="snapshotColumns"
                    [classes]="{'snapshotTime': 'td-min padding-right-large'}"
                    [data]="visibleSnapshots"
                    noDataMessage="No snapshots found"
                    [loadingStatus]="snapshotsStatus"
                    actionIcon="fa-solid fa-pencil"
                    actionTooltip="Edit label"
                    [allowSelect]="true"
                    [actionVisible]="true"
                    [operationsVisible]="true"
                    (onSelect)="selectSnapshot($event)"
                    (onAction)="editSnapshot($event)"
                    (onDelete)="deleteSnapshot($event)"
                ></div>
            </div>
        </ng-container>
    </div>
    <div class="modal-footer" [ngSwitch]="editMode">
        <ng-container *ngSwitchCase="true">
            <button class="btn btn-secondary" type="button" (click)="cancel()">Cancel</button>
            <button type="submit" class="btn btn-secondary" [disable]="saveDisabled()" [pending]="savePending" (click)="saveSnapshot()">Save</button>
        </ng-container>
        <ng-container *ngSwitchDefault>
            <button class="btn btn-secondary" type="button" (click)="close()">Close</button>
            <button type="button" class="btn btn-secondary" (click)="createSnapshot()">Create snapshot</button>
        </ng-container>
    </div>
</form>

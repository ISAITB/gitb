<div id="conformanceDetailPage" class="page conformance">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h4 class="title">Conformance statement details</h4>
		</div>
		<div class="panel-body">
			<div class="row row-display-first">
				<div class="col-md-2"><strong>{{conformanceStatementDetailCtrl.DataService.labelDomain()}}</strong></div>
				<div class="col-md-10">{{conformanceStatementDetailCtrl.domain.fname}}</div>
				<div class="col-md-10 col-md-offset-2 row-display-inner" ng-if="conformanceStatementDetailCtrl.domain.description">{{conformanceStatementDetailCtrl.domain.description}}</div>
			</div>
			<div class="row row-display">
				<div class="col-md-2"><strong>{{conformanceStatementDetailCtrl.DataService.labelSpecification()}}</strong></div>
				<div class="col-md-10">{{conformanceStatementDetailCtrl.specification.fname}}</div>
				<div class="col-md-10 col-md-offset-2 row-display-inner" ng-if="conformanceStatementDetailCtrl.specification.description">{{conformanceStatementDetailCtrl.specification.description}}</div>
			</div>
			<div class="row row-display">
				<div class="col-md-2"><strong>{{conformanceStatementDetailCtrl.DataService.labelActor()}}</strong></div>
				<div class="col-md-10">{{conformanceStatementDetailCtrl.actor.name}}</div>
				<div class="col-md-10 col-md-offset-2 row-display-inner" ng-if="conformanceStatementDetailCtrl.actor.description">{{conformanceStatementDetailCtrl.actor.description}}</div>
			</div>
			<div class="row row-display">
				<div class="col-md-2"><strong>Test results</strong></div>
				<div class="col-md-10"><span>{{conformanceStatementDetailCtrl.testStatus}}</span></div>
			</div>
			<div class="row row-display-last" style="display:flex; margin-bottom:-2px;">
				<div class="col-md-2" style="display:inline-flex"><strong>Status</strong></div>
				<div class="col-md-10" style="display:inline-flex; align-items: center; line-height:0px"><span><i ng-class="conformanceStatementDetailCtrl.DataService.iconForTestResult(conformanceStatementDetailCtrl.conformanceStatus)"></i></span></div>
			</div>
		</div>
        <div class="panel-footer">
			<div class="btn-toolbar">
				<button ng-if="conformanceStatementDetailCtrl.canExportConformanceCertificate()" type="button" class="btn btn-default" ng-click="conformanceStatementDetailCtrl.onExportConformanceCertificate()" ng-disabled="conformanceStatementDetailCtrl.exportCertificatePending"><span class="tab" ng-if="conformanceStatementDetailCtrl.exportCertificatePending"><i class="fa fa-spinner fa-spin fa-lg fa-fw"></i></span>Download conformance certificate</button>
				<button type="button" class="btn btn-default" ng-click="conformanceStatementDetailCtrl.onExportConformanceStatement()" ng-disabled="conformanceStatementDetailCtrl.exportPending"><span class="tab" ng-if="conformanceStatementDetailCtrl.exportPending"><i class="fa fa-spinner fa-spin fa-lg fa-fw"></i></span>Download report</button>
				<button type="button" class="btn btn-default" ng-if="conformanceStatementDetailCtrl.canDelete()" ng-click="conformanceStatementDetailCtrl.deleteConformanceStatement()">Delete statement</button>
			</div>
        </div>		
	</div>
	<div class="panel panel-default" ng-if="conformanceStatementDetailCtrl.hasEndpoints">
		<div class="panel-heading panel-heading-tests">
			<h4 class="title">Configuration parameters</h4>
            <div class="btn-toolbar pull-right" ng-class="{'padded': conformanceStatementDetailCtrl.testSuites.length > 1}">
				<toggle id="conformance-toggle-configuration" class="btn-group" ng-model="conformanceStatementDetailCtrl.endpointsExpanded" on="Visible" off="Hidden"></toggle>
			</div>
		</div>
		<div ng-class="{'list-group': conformanceStatementDetailCtrl.hasMultipleEndpoints}" uib-collapse="!conformanceStatementDetailCtrl.endpointsExpanded">
			<div class="endpoint" ng-class="{'list-group-item': conformanceStatementDetailCtrl.hasMultipleEndpoints}" ng-repeat="endpoint in conformanceStatementDetailCtrl.endpointRepresentations">
				<div endpoint-display endpoint="endpoint" hide-endpoint-info="!conformanceStatementDetailCtrl.hasMultipleEndpoints" editable="!conformanceStatementDetailCtrl.DataService.isVendorUser" can-edit="conformanceStatementDetailCtrl.canEditParameter" show-values="true" on-edit="conformanceStatementDetailCtrl.onParameterSelect"></div>
			</div>
		</div>
	</div>

	<div class="panel panel-default" ng-if="conformanceStatementDetailCtrl.testSuites.length > 0">
		<div class="panel-heading panel-heading-tests">
			<h4 class="title">Conformance tests</h4>
            <div class="btn-toolbar pull-right" ng-class="{'padded': conformanceStatementDetailCtrl.testSuites.length > 1}">
				<toggle id="conformance-toggle" class="btn-group" ng-model="conformanceStatementDetailCtrl.backgroundMode" on="Background execution" off="Interactive execution"></toggle>
				<button type="button" ng-style="{'margin-right':(conformanceStatementDetailCtrl.testSuites.length == 1 && conformanceStatementDetailCtrl.testSuites[0].testCases.length > 1)?'-3px':'8px'}" class="btn btn-primary" ng-if="conformanceStatementDetailCtrl.testSuites.length == 1 && conformanceStatementDetailCtrl.testSuites[0].hasDocumentation" ng-click="conformanceStatementDetailCtrl.showTestSuiteDocumentation(conformanceStatementDetailCtrl.testSuites[0].id)"><i class="fa fa-info-circle"></i></button>
				<button type="button" class="btn btn-primary" ng-if="conformanceStatementDetailCtrl.testSuites.length == 1 && conformanceStatementDetailCtrl.testSuites[0].testCases.length > 1" ng-click="conformanceStatementDetailCtrl.onTestSuiteSelect()"><i class="fa fa-play"></i></button>
			</div>
		</div>

		<table id="conformance-statement-details" class="table table-directive" ng-class="{'expandable-table': (conformanceStatementDetailCtrl.testSuites.length > 1),'padded-table': (conformanceStatementDetailCtrl.testSuites.length == 1)}">
			<thead>
				<th style="white-space: nowrap;">{{conformanceStatementDetailCtrl.testSuites.length == 1?"Test case":"Test suite"}}</th>
				<th>Description</th>
				<th class="tb-result">Result</th>
				<th style="width:118px;"></th>
			</thead>

			<tbody ng-if="conformanceStatementDetailCtrl.loadingStatus.status == conformanceStatementDetailCtrl.Constants.STATUS.PENDING">
				<td colspan="4" class="td-data-loading"><span><i class="fa fa-spinner fa-spin fa-lg fa-fw"></i></span></td>
			</tbody>
			<tbody ng-if="conformanceStatementDetailCtrl.loadingStatus.status == conformanceStatementDetailCtrl.Constants.STATUS.FINISHED && conformanceStatementDetailCtrl.testSuites.length == 0">
				<td colspan="4" class="td-no-data"><span>No test cases found</span></td>
			</tbody>
			<tbody ng-if="conformanceStatementDetailCtrl.testSuites.length == 1">
				<tr ng-repeat="testCase in conformanceStatementDetailCtrl.testSuites[0].testCases">
					<td>{{testCase.sname}}</td>
					<td>{{testCase.description}}</td>
					<td class="tb-result">
						<div tb-result-display message="testCase.outputMessage" result="testCase.result"></div>
					</td>
					<td class="operation-cell">
						<div class="btn-toolbar pull-right">
							<button type="button" class="btn btn-primary" ng-if="testCase.hasDocumentation" ng-click="conformanceStatementDetailCtrl.showTestCaseDocumentation(testCase.id)"><i class="fa fa-info-circle"></i></button>
							<button class="btn btn-primary" ng-click="conformanceStatementDetailCtrl.onTestSelect(testCase)"><i class="fa fa-play"></i></button>
						</div>
					</td>
				</tr>
			</tbody>
			<tbody ng-if="conformanceStatementDetailCtrl.testSuites.length > 1">
				<tr ng-repeat-start="testSuite in conformanceStatementDetailCtrl.testSuites"
					ng-click="conformanceStatementDetailCtrl.onExpand(testSuite)"
					class="expandable-table-row-collapsed">
					<td>{{testSuite.sname}}</td>
					<td>{{testSuite.description}}</td>
					<td class="tb-result"><i ng-class="conformanceStatementDetailCtrl.DataService.iconForTestResult(testSuite.result)"></i></td>
					<td style="padding-right: 17px;">
						<div class="btn-toolbar pull-right">
							<button type="button" class="btn btn-primary" ng-if="testSuite.hasDocumentation" ng-click="conformanceStatementDetailCtrl.showTestSuiteDocumentation(testSuite.id); $event.stopPropagation();"><i class="fa fa-info-circle"></i></button>
							<button class="btn btn-primary" ng-click="conformanceStatementDetailCtrl.onTestSuiteSelect(testSuite); $event.stopPropagation();"><i class="fa fa-play"></i></button>
						</div>
					</td>
				</tr>
				<tr ng-repeat-end class="expandable-table-row-expanded">
					<td colspan="4" class="expandable-table-expandable-cell">
						<div uib-collapse="!testSuite.expanded">
							<table class="table table-directive expandable-table">
								<thead>
									<th style="white-space: nowrap;">Test case</th>
									<th>Description</th>
									<th class="td-centered" style="width:110px">Result</th>
									<th style="width:110px"></th>
								</thead>
								<tbody>
									<tr ng-repeat="testCase in testSuite.testCases">
										<td>{{testCase.sname}}</td>
										<td>{{testCase.description}}</td>
										<td class="tb-result">
											<div tb-result-display message="testCase.outputMessage" result="testCase.result"></div>
										</td>
										<td>
											<div class="btn-toolbar pull-right">
												<button type="button" class="btn btn-primary" ng-if="testCase.hasDocumentation" ng-click="conformanceStatementDetailCtrl.showTestCaseDocumentation(testCase.id)"><i class="fa fa-info-circle"></i></button>
												<button class="btn btn-primary" ng-click="conformanceStatementDetailCtrl.onTestSelect(testCase)"><i class="fa fa-play"></i></button>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
